<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Attributes / Fields / Indexing &mdash; Plone Community Managed Developer Manual v1.0 documentation</title>
    <link rel="stylesheet" href="../../../_static/plone.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="Plone Community Managed Developer Manual v1.0 documentation" href="../../../index.html" />
    <link rel="up" title="Basic Features" href="index.html" />
    <link rel="next" title="Widgets" href="field-widgets.html" />
    <link rel="prev" title="Classes / Content Types" href="classes-content-types.html" />
<script language="javascript">
//<![CDATA[

Documentation.addTranslations({"locale": "fr", "plural_expr": "(n > 1)", "messages": {"See the definition": "Voir la d\u00e9finition"}});

// See http://disqus.disqus.com/general_integration_help/
var disqus_developer = 1;
if (document.location.protocol == 'http:') {
    disqus_developer = 0;
}

// Some HTML/CSS transforms we can't do in pure CSS (waiting for CSS3 support)
$(document).ready(function () {

    // Style of .. verisonmodified:: , .. versionadded:: ...
    $('p:has(span.versionmodified)').addClass('p-versionmodified');

    // Style of the TOC tree
    $('ul:has(li.toctree-l1)').addClass('toctree');

    // Decorate links to other sites
    $('a[class~=external]').attr('target', '_blank');

    // Glossary terms
    $('em.xref').attr('title', _('See the definition'));

    // We need to have all <pre> in a <div class="highlight"> to mimic pygments
    // to work around a pygments (?) bug
    var suffixes = {cfg: null, python:null};
    for (var suffix in suffixes) {
        var pattern = 'div.highlight-' + suffix + ' > pre';
        $(pattern).wrap('<div class="highlight" />');
    }
    return true;
});
//]]>
</script>

  </head>
  <body>
<!--[if lte IE 6]>
<style type="text/css">
#ie6msg{border:3px solid #090; margin:8px 0; background:#cfc; color:#000;}
#ie6msg h4{margin:8px; padding:0;}
#ie6msg p{margin:8px; padding:0;}
#ie6msg p a.getie8{font-weight:bold; color:#006;}
#ie6msg p a.ie6expl{font-weight:normal; color:#006;}
</style>
<div id="ie6msg">
<h4>Did you know that your browser is out of date?</h4>
<p>If the layout of this site seems ugly, that's because you're actually using
an outdated browser. And we wont put any effort to provide a nice layout to IE6
users.</p>
<p>To get the best possible experience using our website we recommend that you
upgrade your browser to a newer version. The current version
is <a class="getie8"
href="http://upgradeie.s3.amazonaws.com/eng/index.html">Internet Explorer
8</a>. The upgrade is free. If you're using a PC at work you should contact your
IT administrator.</p>
<p>If you want to you may also try some other popular Internet browsers
like <a class="ie6expl"
href="http://getfirefox.com">Firefox</a>, <a class="ie6expl"
href="http://www.google.com/chrome">Chrome</a>, <a class="ie6expl"
href="http://www.opera.com">Opera</a>, or <a class="ie6expl"
href="http://www.apple.com/safari/download/">Safari</a></p>
</div>
<![endif]-->

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="field-widgets.html" title="Widgets"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="classes-content-types.html" title="Classes / Content Types"
             accesskey="P">previous</a> |</li>
        <li><a href="../../../index.html">Plone Community Managed Developer Manual v1.0 documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Tutorials</a> &raquo;</li>
          <li><a href="../index.html" >Using ArchGenXML</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Basic Features</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="sphinx-content">
    <div class="section" id="attributes-fields-indexing">
<h1>Attributes / Fields / Indexing<a class="headerlink" href="#attributes-fields-indexing" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#usage-of-tagged-values" id="id1">Usage of tagged values</a></li>
<li><a class="reference internal" href="#non-string-tagged-values" id="id2">Non-string tagged values</a></li>
<li><a class="reference internal" href="#field-recycling-copy-from-parents-schema-or-another-source-schema-and-modify" id="id3">field recycling - copy from parents schema or another source schema and modify</a></li>
<li><a class="reference internal" href="#index-and-metadata-in-catalogs-and-collection" id="id4">Index and metadata in catalogs and Collection</a></li>
</ul>
</div>
<div class="admonition-description admonition ">
<p class="first admonition-title">Description</p>
<p class="last">How to control the fields of your schema.</p>
</div>
<p>Archetypes are using <em>schemas</em> (also called <em>schemata</em>) with <em>fields</em> to define the form-fields on your content. The schema and its fields of your content types is generated from the <em>attributes</em> of your classes in your model and their tagged values. Each field has a type and a widget.</p>
<p>The <a class="reference external" href="http://plone.org/documentation/manual/archetypes-developer-manual">Archetypes documentation</a> and the quick reference at the end of this document describes which fields are available and what parameters they take as configuration.</p>
<div class="section" id="usage-of-tagged-values">
<h2><a class="toc-backref" href="#id1">Usage of tagged values</a><a class="headerlink" href="#usage-of-tagged-values" title="Permalink to this headline">¶</a></h2>
<p>If you set a tagged value on an attribute of your class, in general that tagged value will be passed through as a parameter to the generated Archetypes field. Hence, if you set a tagged value <tt class="docutils literal"><span class="pre">enforceVocabulary</span></tt> to the value <tt class="docutils literal"><span class="pre">1</span></tt> on an attribute, you will get <tt class="docutils literal"><span class="pre">enforceVocabulary=1</span></tt> for that field in the generated schema. Similarly, you can set a field's widget properties by prefixing the tagged value with <tt class="docutils literal"><span class="pre">widget:</span></tt>. <tt class="docutils literal"><span class="pre">widget:label</span></tt> sets the label of a widget, for instance.</p>
</div>
<div class="section" id="non-string-tagged-values">
<h2><a class="toc-backref" href="#id2">Non-string tagged values</a><a class="headerlink" href="#non-string-tagged-values" title="Permalink to this headline">¶</a></h2>
<p>As before, when reading tagged values, ArchGenXML will generally treat them as strings, with a few exceptions where only non-string values are permitted, such as the 'required' tagged value. If you do not wish your value to be quoted as a string, prefix it with <tt class="docutils literal"><span class="pre">python:</span></tt>. For example, if you set the tagged value <tt class="docutils literal"><span class="pre">default</span></tt> to <tt class="docutils literal"><span class="pre">python:[&quot;high&quot;,</span> <span class="pre">&quot;low&quot;]</span></tt> on a <tt class="docutils literal"><span class="pre">lines</span></tt> attribute, you will get <tt class="docutils literal"><span class="pre">default=[&quot;high&quot;,</span> <span class="pre">&quot;low&quot;]</span></tt> in a LinesField in your schema.</p>
</div>
<div class="section" id="field-recycling-copy-from-parents-schema-or-another-source-schema-and-modify">
<h2><a class="toc-backref" href="#id3">field recycling - copy from parents schema or another source schema and modify</a><a class="headerlink" href="#field-recycling-copy-from-parents-schema-or-another-source-schema-and-modify" title="Permalink to this headline">¶</a></h2>
<p>This feature alows you to copy a field from another source schema and rename the field.</p>
<p>Rather than subclass an entire class then delete unwanted fields, you can explicitly copy just the fields you need. You can keep the copied field &quot;as-is&quot; or modify it by overriding properties with tag values as needed.</p>
<p>For example you may need a <tt class="docutils literal"><span class="pre">Description</span></tt> field that is usually defined in your parent classes (BaseContent, BaseFolder) Schema. You would create a new attribute in your class named <tt class="docutils literal"><span class="pre">description</span></tt> with a type of <tt class="docutils literal"><span class="pre">copy.</span></tt> If you want it to appear in your base_edit form rather then the default of properties/metadata page you just need to change one property of the field by adding the tag <tt class="docutils literal"><span class="pre">schemata</span> <span class="pre">=</span> <span class="pre">&quot;default&quot;</span></tt>.</p>
<p>You may also copy from any other schema or from within the same schema. You need to specify the source schema using the tag <tt class="docutils literal"><span class="pre">copy_from</span></tt> and if you need to rename the field use the <tt class="docutils literal"><span class="pre">source_name</span></tt> tag to indicate the source field Id, otherwise the Id of the field in you schema is used.</p>
</div>
<div class="section" id="index-and-metadata-in-catalogs-and-collection">
<h2><a class="toc-backref" href="#id4">Index and metadata in catalogs and Collection</a><a class="headerlink" href="#index-and-metadata-in-catalogs-and-collection" title="Permalink to this headline">¶</a></h2>
<p>ArchgenXML can create configuration files to create an index and/or metadata entries in the catalog such as portal_catalog.</p>
<p>Available are the following tagged values:</p>
<p><tt class="docutils literal"><span class="pre">catalog:index</span></tt> -- add the field to the index. Boolean, 1 or 0. Default is 0. If set, you may need to provide <tt class="docutils literal"><span class="pre">index:*</span></tt> tagged values too.</p>
<p><tt class="docutils literal"><span class="pre">catalog:metadata</span></tt> -- add the field to the metadata record on the query result? Boolean, 1 or 0. If you do not provide <tt class="docutils literal"><span class="pre">index:attributes</span></tt>, the name of the accessor of the field is the default. If <tt class="docutils literal"><span class="pre">catalog:metadata_accessor</span></tt> is given it will be used instead.</p>
<p><tt class="docutils literal"><span class="pre">catalog:metadata_accessor</span></tt> -- the accessor used for the metadata (string).</p>
<p><tt class="docutils literal"><span class="pre">catalog:name</span></tt> -- sometimes you need to add an index to a other catalog than <tt class="docutils literal"><span class="pre">portal_catalog</span></tt> and its XML-File <tt class="docutils literal"><span class="pre">catalog.xml</span></tt>. Provide a tuple of comma separated strings, id of the catalog and the filename of its configuration file. default is &quot;portal_catalog, Plone Catalog Tool'.</p>
<p><tt class="docutils literal"><span class="pre">index:type</span></tt> -- the type of index used as (string), for example <tt class="docutils literal"><span class="pre">FieldIndex</span></tt>, <tt class="docutils literal"><span class="pre">KeywordIndex</span></tt>, <tt class="docutils literal"><span class="pre">DateIndex</span></tt> or any available index in your portal. For known types a default is guessed, such as FieldIndex for StringFields or DateIndex for DateFields. If no guess is possible, we assume a FieldIndex.</p>
<p><tt class="docutils literal"><span class="pre">index:attributes</span></tt> -- the attributes to use for index (string or comma separated list of strings). This are the methods called at indexing time. Normally it is enough to provide one index method, but for some specific use cases you might need to provide alternatives. If you do not provide this tagged value, the name of the accessor of the field is the default.</p>
<p><tt class="docutils literal"><span class="pre">index:name</span></tt> -- the name of the index used (string). Use this name in your queries. If you do not provide a name, the name of the accessor of the field is the default.</p>
<p><tt class="docutils literal"><span class="pre">index:extras</span></tt> -- some indexes are using so called <em>extras</em> on installation as configuration. If the index need extras you'll need to declare them here. provide a comma separated list.</p>
<p><tt class="docutils literal"><span class="pre">index:properties</span></tt> -- some indexes are using <em>properties</em> on installation as configuration. If the index need properties you'll need to declare them here. Provide a comma separated list.</p>
<p><tt class="docutils literal"><span class="pre">collection:criteria</span></tt> -- add the index to the Collection (aka Smart Folder) Indexes available for defining Criteria. Provide a comma seprated list of criteria that will be available by default. Available criterias are: ATBooleanCriterion, ATDateCriteria, ATDateRangeCriterion, ATListCriterion, ATPortalTypeCriterion, ATReferenceCriterion, ATSelectionCriterion, ATSimpleIntCriterion, ATSimpleStringCriterion, ATSortCriterion, ATCurrentAuthorCriterion, ATPathCriterion, ATRelativePathCriterion. You must provide an <tt class="docutils literal"><span class="pre">index:type</span></tt> as well.</p>
<p><tt class="docutils literal"><span class="pre">collection:criteria_label</span></tt> -- the display name of the <tt class="docutils literal"><span class="pre">collection:criteria</span></tt>, called <em>friendly name</em> (string). Its added to the <tt class="docutils literal"><span class="pre">generated.pot</span></tt> as a literal. If not given the <tt class="docutils literal"><span class="pre">widget:label</span></tt> is taken if provided.</p>
<p><tt class="docutils literal"><span class="pre">collection:criteria_description</span></tt> -- a help text (string), used for <tt class="docutils literal"><span class="pre">collection:criteria</span></tt>. Its added to the <tt class="docutils literal"><span class="pre">generated.pot</span></tt> as a literal. if not provided the <tt class="docutils literal"><span class="pre">widget:description</span></tt> is used.</p>
<p><tt class="docutils literal"><span class="pre">collection:metadata</span></tt> -- register the <tt class="docutils literal"><span class="pre">catalog:metadata</span></tt> as an available column in a Collection. Can be used as an alternative for <tt class="docutils literal"><span class="pre">catalog:metadata</span></tt>. <tt class="docutils literal"><span class="pre">catalog:metadata_accessor</span></tt> is used if given.</p>
<p><tt class="docutils literal"><span class="pre">collection:metadata_label</span></tt> -- the display name of the <tt class="docutils literal"><span class="pre">collection:metadata</span></tt>, called <em>friendly name</em> (string), used for index:criteria. Its added to the <tt class="docutils literal"><span class="pre">generated.pot</span></tt> as a literal. If not given the <tt class="docutils literal"><span class="pre">widget:label</span></tt> is taken if provided.</p>
<p><tt class="docutils literal"><span class="pre">collection:metadata_description</span></tt> -- a help text (string), used for <tt class="docutils literal"><span class="pre">collection:criteria</span></tt>. Its added to the <tt class="docutils literal"><span class="pre">generated.pot</span></tt> as a literal. If not provided the <tt class="docutils literal"><span class="pre">collection:criteria_help</span></tt> or - if not provided - <tt class="docutils literal"><span class="pre">widget:description</span></tt> is used.</p>
<p><strong>DEPRECATED</strong> For backward compatibility reasons we support a sub part of the old style in ArchGenxML Version 1.6 and earlier using the tagged value <tt class="docutils literal"><span class="pre">index</span></tt>. This is deprecated and will be removed in one of the next version of ArchGenXML. A tagged value <tt class="docutils literal"><span class="pre">index</span></tt> with value like <tt class="docutils literal"><span class="pre">index:type</span></tt> above creates an index with the accessor. To include the index in catalog metadata (and have the attribute ready to use in the brain objects), append <tt class="docutils literal"><span class="pre">:brains</span></tt> (same as older <tt class="docutils literal"><span class="pre">:schema</span></tt>), (e.g. <tt class="docutils literal"><span class="pre">FieldIndex:brains</span></tt>). ArchGenXML does longer provides the ability to define multiple indexes using the old declaration style.</p>
</div>
</div>

  </div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<p class="logo"><a href="../../../index.html"><img src="../../../_static/plone-icon-64.png" />
</a></p>

  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Attributes / Fields / Indexing</a><ul>
<li><a class="reference internal" href="#usage-of-tagged-values">Usage of tagged values</a></li>
<li><a class="reference internal" href="#non-string-tagged-values">Non-string tagged values</a></li>
<li><a class="reference internal" href="#field-recycling-copy-from-parents-schema-or-another-source-schema-and-modify">field recycling - copy from parents schema or another source schema and modify</a></li>
<li><a class="reference internal" href="#index-and-metadata-in-catalogs-and-collection">Index and metadata in catalogs and Collection</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="classes-content-types.html"
                        title="previous chapter">Classes / Content Types</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="field-widgets.html"
                        title="next chapter">Widgets</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../../_sources/tutorials/archgenxml/basic-features/attributes-fields-indexing.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="field-widgets.html" title="Widgets"
             >next</a> |</li>
        <li class="right" >
          <a href="classes-content-types.html" title="Classes / Content Types"
             >previous</a> |</li>
        <li><a href="../../../index.html">Plone Community Managed Developer Manual v1.0 documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Tutorials</a> &raquo;</li>
          <li><a href="../index.html" >Using ArchGenXML</a> &raquo;</li>
          <li><a href="index.html" >Basic Features</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2010 mFabrik Research Oy and Plone community contributors.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.4.
    </div>


  </body>
</html>