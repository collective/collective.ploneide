<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Javascripting &mdash; Plone Community Managed Developer Manual v1.0 documentation</title>
    <link rel="stylesheet" href="../_static/plone.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Plone Community Managed Developer Manual v1.0 documentation" href="../index.html" />
    <link rel="up" title="Templates, CSS and Javascript" href="index.html" />
    <link rel="next" title="Resource folders" href="resourcefolders.html" />
    <link rel="prev" title="CSS" href="css.html" />
<script language="javascript">
//<![CDATA[

Documentation.addTranslations({"locale": "fr", "plural_expr": "(n > 1)", "messages": {"See the definition": "Voir la d\u00e9finition"}});

// See http://disqus.disqus.com/general_integration_help/
var disqus_developer = 1;
if (document.location.protocol == 'http:') {
    disqus_developer = 0;
}

// Some HTML/CSS transforms we can't do in pure CSS (waiting for CSS3 support)
$(document).ready(function () {

    // Style of .. verisonmodified:: , .. versionadded:: ...
    $('p:has(span.versionmodified)').addClass('p-versionmodified');

    // Style of the TOC tree
    $('ul:has(li.toctree-l1)').addClass('toctree');

    // Decorate links to other sites
    $('a[class~=external]').attr('target', '_blank');

    // Glossary terms
    $('em.xref').attr('title', _('See the definition'));

    // We need to have all <pre> in a <div class="highlight"> to mimic pygments
    // to work around a pygments (?) bug
    var suffixes = {cfg: null, python:null};
    for (var suffix in suffixes) {
        var pattern = 'div.highlight-' + suffix + ' > pre';
        $(pattern).wrap('<div class="highlight" />');
    }
    return true;
});
//]]>
</script>

  </head>
  <body>
<!--[if lte IE 6]>
<style type="text/css">
#ie6msg{border:3px solid #090; margin:8px 0; background:#cfc; color:#000;}
#ie6msg h4{margin:8px; padding:0;}
#ie6msg p{margin:8px; padding:0;}
#ie6msg p a.getie8{font-weight:bold; color:#006;}
#ie6msg p a.ie6expl{font-weight:normal; color:#006;}
</style>
<div id="ie6msg">
<h4>Did you know that your browser is out of date?</h4>
<p>If the layout of this site seems ugly, that's because you're actually using
an outdated browser. And we wont put any effort to provide a nice layout to IE6
users.</p>
<p>To get the best possible experience using our website we recommend that you
upgrade your browser to a newer version. The current version
is <a class="getie8"
href="http://upgradeie.s3.amazonaws.com/eng/index.html">Internet Explorer
8</a>. The upgrade is free. If you're using a PC at work you should contact your
IT administrator.</p>
<p>If you want to you may also try some other popular Internet browsers
like <a class="ie6expl"
href="http://getfirefox.com">Firefox</a>, <a class="ie6expl"
href="http://www.google.com/chrome">Chrome</a>, <a class="ie6expl"
href="http://www.opera.com">Opera</a>, or <a class="ie6expl"
href="http://www.apple.com/safari/download/">Safari</a></p>
</div>
<![endif]-->

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="resourcefolders.html" title="Resource folders"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="css.html" title="CSS"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Plone Community Managed Developer Manual v1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Templates, CSS and Javascript</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="sphinx-content">
    <div class="section" id="javascripting">
<h1>Javascripting<a class="headerlink" href="#javascripting" title="Permalink to this headline">¶</a></h1>
<div class="admonition-description admonition ">
<p class="first admonition-title">Description</p>
<p class="last">How to add your own Javascript files to Plone and Plone add-on products</p>
</div>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id1">Introduction</a></li>
<li><a class="reference internal" href="#javascript-libraries" id="id2">Javascript libraries</a></li>
<li><a class="reference internal" href="#creating-javascripts-for-plone" id="id3">Creating Javascripts for Plone</a></li>
<li><a class="reference internal" href="#executing-javascript-code-on-page-load" id="id4">Executing Javascript code on page load</a></li>
<li><a class="reference internal" href="#registering-javascripts-to-portal-javascripts" id="id5">Registering javascripts to portal_javascripts</a><ul>
<li><a class="reference internal" href="#bundles" id="id6">Bundles</a></li>
<li><a class="reference internal" href="#include-javascript-on-every-page" id="id7">Include Javascript on every page</a></li>
<li><a class="reference internal" href="#including-javascript-for-authenticated-users-only" id="id8">Including Javascript for authenticated users only</a></li>
<li><a class="reference internal" href="#including-javascripts-for-widgets-and-other-special-conditions" id="id9">Including Javascripts for widgets and other special conditions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#passing-dynamic-settings-to-javascripts" id="id10">Passing dynamic settings to Javascripts</a></li>
<li><a class="reference internal" href="#useful-out-of-the-box-javascripts" id="id11">Useful out of the box Javascripts</a></li>
<li><a class="reference internal" href="#per-folder-overrides" id="id12">Per folder overrides</a></li>
<li><a class="reference internal" href="#generating-javascript-dynamically" id="id13">Generating Javascript dynamically</a></li>
<li><a class="reference internal" href="#conditional-comments-ie" id="id14">Conditional comments (IE)</a></li>
<li><a class="reference internal" href="#loading-javascript-files-for-certain-edit-views-only-to-be-used-with-widgets" id="id15">Loading Javascript files for certain edit views only (to be used with widgets)</a></li>
<li><a class="reference internal" href="#ajax-y-view-loading" id="id16">AJAX-y view loading</a><ul>
<li><a class="reference internal" href="#loading-by-page-load" id="id17">Loading by page load</a></li>
<li><a class="reference internal" href="#loading-when-element-becomes-visible" id="id18">Loading when element becomes visible</a></li>
</ul>
</li>
<li><a class="reference internal" href="#checking-if-document-is-in-wysiwyg-edit-mode" id="id19">Checking if document is in WYSIWYG edit mode</a></li>
<li><a class="reference internal" href="#image-hovers" id="id20">Image hovers</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Javascripts files must be distributed to Plone</p>
<ul class="simple">
<li>By creating them through-the-web editor in <a class="reference internal" href="skin_layers.html"><em>portal_skins</em></a>.
are stored in ZODB in this case.</li>
<li>By add-on products using <a class="reference internal" href="resourcefolders.html"><em>Zope 3 resource folders</em></a></li>
</ul>
<p>Then the Javascript must be registered on the site</p>
<ul class="simple">
<li>Through-the-web in portal_javascripts in ZMI</li>
<li>Using <a class="reference internal" href="../components/genericsetup.html"><em>GenericSetup jsregistry.xml</em></a> which
is run (and rerun) when you use the add-on installer in the control panel</li>
</ul>
<p>Plone Javascripts are managed by resource registry <em>portal_javascripts</em>.
You can find this in Zope Management interface, under your portal root folder.</p>
<p>portal_javascript will automatically</p>
<ul class="simple">
<li>compress JS files</li>
<li>merge JS load requests</li>
<li>determine which files are included on which HTML page</li>
<li>support IE conditional comments</li>
</ul>
</div>
<div class="section" id="javascript-libraries">
<h2><a class="toc-backref" href="#id2">Javascript libraries</a><a class="headerlink" href="#javascript-libraries" title="Permalink to this headline">¶</a></h2>
<p>You can use any Javascript library with Plone.</p>
<p>Plone internally uses jQuery.</p>
</div>
<div class="section" id="creating-javascripts-for-plone">
<h2><a class="toc-backref" href="#id3">Creating Javascripts for Plone</a><a class="headerlink" href="#creating-javascripts-for-plone" title="Permalink to this headline">¶</a></h2>
<p>The following ste</p>
<ul>
<li><p class="first">Put ZMI -&gt; portal_javascripts to debug mode</p>
</li>
<li><p class="first">Include new JS files</p>
<blockquote>
<ul class="simple">
<li>Use ZCML configuration directive <a class="reference internal" href="resourcefolders.html"><em>resourceFolder</em></a> to
include static media files in your add-on product</li>
<li>Put in new Javascript via ZMI upload (you can use Page Template type) to portal_skins/custom folder</li>
</ul>
</blockquote>
</li>
<li><p class="first">Register Javascript in portal_javascripts</p>
<blockquote>
<ul class="simple">
<li>Do it through-the-web using portal_javascripts ZMI user interface ...or...</li>
<li>Add <em>profiles/default/jsregistry.xml</em> file to describe Javascript files included with your add-on product</li>
</ul>
</blockquote>
</li>
</ul>
</div>
<div class="section" id="executing-javascript-code-on-page-load">
<h2><a class="toc-backref" href="#id4">Executing Javascript code on page load</a><a class="headerlink" href="#executing-javascript-code-on-page-load" title="Permalink to this headline">¶</a></h2>
<p>Plone includes JQuery library which has <tt class="docutils literal"><span class="pre">ready()</span></tt>
event handler to run Javascript code when DOM tree
loading is done (HTML is loaded, images and media files
are not necesssarily loaded).</p>
<p>Create following snippet:</p>
<div class="highlight-python"><pre>jq(document).ready(function() {
    // TODO: Execute your page manipulating Javascript code here
});</pre>
</div>
</div>
<div class="section" id="registering-javascripts-to-portal-javascripts">
<h2><a class="toc-backref" href="#id5">Registering javascripts to portal_javascripts</a><a class="headerlink" href="#registering-javascripts-to-portal-javascripts" title="Permalink to this headline">¶</a></h2>
<p>Javascript files need to be registered in order to appear in Plone's &lt;html&gt; &lt;head&gt;
and in the Javascript merge compositions.</p>
<p>Javascripts are registered to portal_javascripts tool using <em>profiles/default/jsregistry.xml</em> GenericSetup
profile file.</p>
<ul class="simple">
<li><a class="reference external" href="http://plone.org/documentation/manual/theme-reference/page/css/resource-registries/practical2">More information about jsregistry.xml</a>.</li>
</ul>
<p>The following options are available</p>
<ul class="simple">
<li><em>id</em> (required): URI from where the Javascript is loaded</li>
<li><em>expression</em> empty string or TAL condition which determintes whether the file is served to the user.
The files with the same condition are grouped to the same compression bundle. For more information,
see <a class="reference internal" href="../functionality/expressions.html"><em>expressions documentation</em></a>.</li>
<li><em>authenticated</em> (Plone 4+) is expression override, which tells
the load the script for authenticated users only</li>
<li><em>cookable</em> is merging of Javascript files allowed during the compression</li>
<li><em>inline</em> is script server as inline inside &lt;script&gt;...&lt;/script&gt; tag</li>
<li><em>enabled</em> shortcut to disable some Javascripts</li>
<li><em>compression</em> none, safe or full. See full option list from portal_javascripts.</li>
<li><em>insert-before</em> and <em>insert-after</em> control the position of the Javascript file
in relation to other served Javascript files</li>
</ul>
<p><a class="reference external" href="https://svn.plone.org/svn/plone/ResourceRegistries/trunk/Products/ResourceRegistries/exportimport/resourceregistry.py">Full description in the source code</a>.</p>
<div class="section" id="bundles">
<h3><a class="toc-backref" href="#id6">Bundles</a><a class="headerlink" href="#bundles" title="Permalink to this headline">¶</a></h3>
<p>There are several compressed Javascript bundles served by Plone.
The process of compressing &amp; merging files to different bundles
is internally called &quot;cooking&quot;</p>
<p>You can examine available bundles in <em>portal_javascripts</em>
Zope Management Interface Tool, on <em>Merged Compositions</em> tab.</p>
<p>Usually the following bundles are served</p>
<ul class="simple">
<li>Anonymous users (no condition)</li>
<li>Logged in users (condition: not: portal/portal_membership/isAnonymousUser)</li>
<li>Visual editor (TinyMCE) related Javascripts</li>
</ul>
</div>
<div class="section" id="include-javascript-on-every-page">
<h3><a class="toc-backref" href="#id7">Include Javascript on every page</a><a class="headerlink" href="#include-javascript-on-every-page" title="Permalink to this headline">¶</a></h3>
<p>The following example includes Javascript file intended for anonymous site users.
It is included after toc.js so that the file ends up as the last script
of the compressed JS bundle which served for all users.</p>
<p>The Javascript file itself is usually <em>yourcompany/app/static/yourjsfile.js</em>
folder in your <a class="reference internal" href="../tutorials/paste.html"><em>add-on product</em></a>.</p>
<p>It is mapped to URI like:</p>
<div class="highlight-python"><pre>http://localhost:8080/Plone/++resource++yourcompany.app/yourjsfile.js</pre>
</div>
<p>by <a class="reference internal" href="resourcefolders.html"><em>Zope 3 resource subsystem</em></a>.</p>
<p>Example <tt class="docutils literal"><span class="pre">profiles/default/jsregistry.xml</span></tt> in your add-on product.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;object</span> <span class="na">name=</span><span class="s">&quot;portal_javascripts&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;javascript</span>
        <span class="na">id=</span><span class="s">&quot;++resource++plonetheme.xxx.scripts/cufon-yui.js&quot;</span>
        <span class="na">cacheable=</span><span class="s">&quot;True&quot;</span> <span class="na">compression=</span><span class="s">&quot;safe&quot;</span> <span class="na">cookable=</span><span class="s">&quot;True&quot;</span>
        <span class="na">enabled=</span><span class="s">&quot;True&quot;</span> <span class="na">expression=</span><span class="s">&quot;&quot;</span>  <span class="na">inline=</span><span class="s">&quot;False&quot;</span> <span class="na">insert-after=</span><span class="s">&quot;toc.js&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/object&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If &lt;javascript&gt; does not have insert-after or insert-before, the script will end up as the last
of the Javascript registry.</p>
</div>
</div>
<div class="section" id="including-javascript-for-authenticated-users-only">
<h3><a class="toc-backref" href="#id8">Including Javascript for authenticated users only</a><a class="headerlink" href="#including-javascript-for-authenticated-users-only" title="Permalink to this headline">¶</a></h3>
<p>The following registers two Javascript files which are aimed
to edit mode and authenticated users. The Javascript are
added to the merge bundle and compressed, so they do not increase
the load time of the page. The files are loaded from <tt class="docutils literal"><span class="pre">portal_skins</span></tt>
(not from resource folder) and can be referred by their direct filename -
Plone resolves portal_skins files magically for the site root and every
folder.</p>
<p><tt class="docutils literal"><span class="pre">jsregistry.xml</span></tt>:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;object</span> <span class="na">name=</span><span class="s">&quot;portal_javascripts&quot;</span><span class="nt">&gt;</span>


        <span class="nt">&lt;javascript</span>
                <span class="na">id=</span><span class="s">&quot;json.js&quot;</span>
                <span class="na">authenticated=</span><span class="s">&quot;True&quot;</span>
                <span class="na">cacheable=</span><span class="s">&quot;True&quot;</span> <span class="na">compression=</span><span class="s">&quot;safe&quot;</span> <span class="na">cookable=</span><span class="s">&quot;True&quot;</span>
                <span class="na">enabled=</span><span class="s">&quot;True&quot;</span> <span class="na">expression=</span><span class="s">&quot;&quot;</span>  <span class="na">inline=</span><span class="s">&quot;False&quot;</span> <span class="na">insert-after=</span><span class="s">&quot;tiny_mce.js&quot;</span><span class="nt">/&gt;</span>

        <span class="nt">&lt;javascript</span>
                <span class="na">id=</span><span class="s">&quot;orapicker.js&quot;</span>
                <span class="na">authenticated=</span><span class="s">&quot;True&quot;</span>
                <span class="na">cacheable=</span><span class="s">&quot;True&quot;</span> <span class="na">compression=</span><span class="s">&quot;safe&quot;</span> <span class="na">cookable=</span><span class="s">&quot;True&quot;</span>
                <span class="na">enabled=</span><span class="s">&quot;True&quot;</span> <span class="na">expression=</span><span class="s">&quot;&quot;</span>  <span class="na">inline=</span><span class="s">&quot;False&quot;</span> <span class="na">insert-after=</span><span class="s">&quot;json.js&quot;</span><span class="nt">/&gt;</span>


<span class="nt">&lt;/object&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="including-javascripts-for-widgets-and-other-special-conditions">
<h3><a class="toc-backref" href="#id9">Including Javascripts for widgets and other special conditions</a><a class="headerlink" href="#including-javascripts-for-widgets-and-other-special-conditions" title="Permalink to this headline">¶</a></h3>
<p>Here is described a way to include Javascript for
certain widgets or certain pages only.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since Plone loads very heavy Javascripts for logged in users (TinyMCE),
it often makes sense to decrease the count of HTTP requests and
just merge your custom scripts with this bundle instead of trying
to have fine-tuned Javascript load conditions for rare cases.</p>
</div>
<ul class="simple">
<li>Javascripts are processed through portal_javascripts</li>
<li>A special condition is created in Python code to determine when to include the script or not</li>
<li>Javascripts are served from a <em>static</em> media folder in
a Plone add-on utilizing Grok framework</li>
</ul>
<p>The example here shows how to include a Javascript
if the following conditions are met</p>
<ul class="simple">
<li>Content type has a certain <a class="reference internal" href="../content/behaviors.html"><em>Dexterity behavior</em></a> applied on it</li>
<li>Different files are served for view and edit modes</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is no easy way currently directly check whether a certain
widget and widget mode is active on a particular view. Thus,
we do some assumptions and checks manually.</p>
</div>
<p>jsregistry.xml:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;object</span> <span class="na">name=</span><span class="s">&quot;portal_javascripts&quot;</span><span class="nt">&gt;</span>

        <span class="c">&lt;!-- View mode javascript --&gt;</span>
        <span class="nt">&lt;javascript</span>
                <span class="na">id=</span><span class="s">&quot;++resource++yourcompany.app/integration.js&quot;</span>
                <span class="na">authenticated=</span><span class="s">&quot;False&quot;</span>
                <span class="na">cacheable=</span><span class="s">&quot;True&quot;</span> <span class="na">compression=</span><span class="s">&quot;safe&quot;</span> <span class="na">cookable=</span><span class="s">&quot;True&quot;</span>
                <span class="na">enabled=</span><span class="s">&quot;True&quot;</span> <span class="na">expression=</span><span class="s">&quot;context/@@integration_javascript&quot;</span>
                <span class="na">inline=</span><span class="s">&quot;False&quot;</span>
                <span class="nt">/&gt;</span>

        <span class="c">&lt;!-- Edit mode javascript --&gt;</span>
        <span class="nt">&lt;javascript</span>
                <span class="na">id=</span><span class="s">&quot;++resource++yourcompany.app/integration.edit.js&quot;</span>
                <span class="na">authenticated=</span><span class="s">&quot;False&quot;</span>
                <span class="na">cacheable=</span><span class="s">&quot;True&quot;</span> <span class="na">compression=</span><span class="s">&quot;safe&quot;</span> <span class="na">cookable=</span><span class="s">&quot;True&quot;</span>
                <span class="na">enabled=</span><span class="s">&quot;True&quot;</span> <span class="na">expression=</span><span class="s">&quot;context/@@edit_integration_javascript&quot;</span>
                <span class="na">inline=</span><span class="s">&quot;False&quot;</span>
                <span class="nt">/&gt;</span>


<span class="nt">&lt;/object&gt;</span>
</pre></div>
</div>
<p>We create special conditions using <a class="reference internal" href="../components/grok.html"><em>Grok</em></a> views.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Zope imports</span>
<span class="kn">from</span> <span class="nn">Acquisition</span> <span class="kn">import</span> <span class="n">aq_inner</span>
<span class="kn">from</span> <span class="nn">zope.interface</span> <span class="kn">import</span> <span class="n">Interface</span>
<span class="kn">from</span> <span class="nn">five</span> <span class="kn">import</span> <span class="n">grok</span>
<span class="kn">from</span> <span class="nn">zope.component</span> <span class="kn">import</span> <span class="n">getMultiAdapter</span>

<span class="kn">from</span> <span class="nn">yourcompany.app.behavior.lsmintegration</span> <span class="kn">import</span> <span class="n">IYourWidgetIntegration</span>

<span class="k">class</span> <span class="nc">IntegrationJavascriptHelper</span><span class="p">(</span><span class="n">grok</span><span class="o">.</span><span class="n">CodeView</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Used by portal_javascripts to determine when to include our</span>
<span class="sd">        custom Javascript integration code.</span>

<span class="sd">    This view is referred from the expression in jsregistry.xml.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># The view is available on every content item type</span>
    <span class="n">grok</span><span class="o">.</span><span class="n">context</span><span class="p">(</span><span class="n">Interface</span><span class="p">)</span>
    <span class="n">grok</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;integration_javascript&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Check if we are in a specific content type.</span>

<span class="sd">        Check that the Dexerity content type has a certain</span>
<span class="sd">        behavior set on it through Dexterity settings panel.</span>

<span class="sd">        Alternative, just check for a marker interface here.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c"># render() methot is a the only traversable</span>
        <span class="c"># Grok CodeView method. It can be used for rendering</span>
        <span class="c"># HTML code, but also for utility views</span>
        <span class="c"># to return raw Python data</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c"># Check if a Dexterity behavior is available on the current context object</span>
            <span class="c"># - if it is not, behavior adapter will raise TypeError</span>
            <span class="n">avail</span> <span class="o">=</span> <span class="n">IYourWidgetIntegration</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="c"># If called directly from the browser like</span>
        <span class="c"># http://localhost:8080/Plone/integration_javascript</span>
        <span class="c"># will return HTTP 204 No Content</span>

        <span class="k">return</span> <span class="bp">True</span>

<span class="k">class</span> <span class="nc">EditModeIntegrationJavascriptHelper</span><span class="p">(</span><span class="n">IntegrationJavascriptHelper</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Used by portal_javascripts to determine when to include our custom Javascript</span>
<span class="sd">        integration code *on edit pages* only.</span>

<span class="sd">    Subclass the existing checked and add more limiting conditions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">grok</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;edit_integration_javascript&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        @return True: If this template is rendered &quot;Edit view&quot; of the item</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">IntegrationJavascriptHelper</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="c"># We are not even on the correct content type</span>
            <span class="k">return</span> <span class="bp">False</span>

        <span class="c"># This is a hacked together as Plone does not provide a real</span>
        <span class="c"># mechanism to separate edit views to other views.</span>
        <span class="c"># We simply check if the current view URI ends with &quot;edit&quot;</span>

        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;PATH_INFO&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&quot;/edit&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">path</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&quot;/@@edit&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">True</span>

        <span class="k">return</span> <span class="bp">False</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="passing-dynamic-settings-to-javascripts">
<h2><a class="toc-backref" href="#id10">Passing dynamic settings to Javascripts</a><a class="headerlink" href="#passing-dynamic-settings-to-javascripts" title="Permalink to this headline">¶</a></h2>
<p>Here is described a way to pass data from site or context object to a Javascripts easily.
For each page, we create a <tt class="docutils literal"><span class="pre">&lt;script&gt;</span></tt> section which will include all the options
filled in by Python code.</p>
<p>We create the script tag in <tt class="docutils literal"><span class="pre">&lt;head&gt;</span></tt> section using a <a class="reference internal" href="../views/viewlets.html"><em>Grok viewlet</em></a>
registered there.</p>
<p>viewlet.py:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Viewlets related to application logic.</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="c"># Python imports</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c"># Zope imports</span>
<span class="kn">from</span> <span class="nn">Acquisition</span> <span class="kn">import</span> <span class="n">aq_inner</span>
<span class="kn">from</span> <span class="nn">zope.interface</span> <span class="kn">import</span> <span class="n">Interface</span>
<span class="kn">from</span> <span class="nn">five</span> <span class="kn">import</span> <span class="n">grok</span>
<span class="kn">from</span> <span class="nn">zope.component</span> <span class="kn">import</span> <span class="n">getMultiAdapter</span>

<span class="c"># Plone imports</span>
<span class="kn">from</span> <span class="nn">plone.app.layout.viewlets.interfaces</span> <span class="kn">import</span> <span class="n">IHtmlHead</span>

<span class="c"># The viewlets in this file are rendered on every content item type</span>
<span class="n">grok</span><span class="o">.</span><span class="n">context</span><span class="p">(</span><span class="n">Interface</span><span class="p">)</span>

<span class="c"># Use templates directory to search for templates.</span>
<span class="n">grok</span><span class="o">.</span><span class="n">templatedir</span><span class="p">(</span><span class="s">&#39;templates&#39;</span><span class="p">)</span>

<span class="c"># The generated HTML snippet going to &lt;head&gt;</span>
<span class="n">TEMPLATE</span> <span class="o">=</span> <span class="s">u&quot;&quot;&quot;</span>
<span class="s">&lt;script type=&quot;text/javascript&quot; class=&quot;javascript-settings&quot;&gt;</span>
<span class="s">    var </span><span class="si">%(name)s</span><span class="s"> = </span><span class="si">%(json)s</span><span class="s">;</span>
<span class="s">&lt;/script&gt;</span>
<span class="s">&quot;&quot;&quot;</span>

<span class="k">class</span> <span class="nc">JavascriptSettingsSnippet</span><span class="p">(</span><span class="n">grok</span><span class="o">.</span><span class="n">Viewlet</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Include dynamic Javascript code in &lt;head&gt;.</span>

<span class="sd">    Include some code in &lt;head&gt; section which initializes</span>
<span class="sd">    Javascript variables. Later this code can be used</span>
<span class="sd">    by various scripts.</span>

<span class="sd">    Useful for settings.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">grok</span><span class="o">.</span><span class="n">viewletmanager</span><span class="p">(</span><span class="n">IHtmlHead</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getSettings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        @return: Python dictionary of settings</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">context</span> <span class="o">=</span> <span class="n">aq_inner</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">context</span><span class="p">)</span>
        <span class="n">portal_state</span> <span class="o">=</span> <span class="n">getMultiAdapter</span><span class="p">((</span><span class="n">context</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s">u&#39;plone_portal_state&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="c"># Pass dynamically allocated site URL to the Javascripts (virtual host monster thing)</span>
            <span class="s">&quot;staticMediaURL&quot;</span> <span class="p">:</span> <span class="n">portal_state</span><span class="o">.</span><span class="n">portal_url</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;/++resource++yourcompany.app&quot;</span><span class="p">,</span>
            <span class="c"># Some other example parameters</span>
            <span class="s">&quot;schoolId&quot;</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s">&quot;restService&quot;</span> <span class="p">:</span> <span class="s">&quot;http://yourserver.com:8080/rest&quot;</span>
        <span class="p">}</span>


    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Render the settings as inline Javascript object in HTML &lt;head&gt;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">settings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSettings</span><span class="p">()</span>
        <span class="n">json_snippet</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>

        <span class="c"># Use Python string template facility to produce the code</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">TEMPLATE</span> <span class="o">%</span> <span class="p">{</span> <span class="s">&quot;name&quot;</span> <span class="p">:</span> <span class="s">&quot;youroptions&quot;</span><span class="p">,</span> <span class="s">&quot;json&quot;</span> <span class="p">:</span> <span class="n">json_snippet</span> <span class="p">}</span>

        <span class="k">return</span> <span class="n">html</span>
</pre></div>
</div>
</div>
<div class="section" id="useful-out-of-the-box-javascripts">
<h2><a class="toc-backref" href="#id11">Useful out of the box Javascripts</a><a class="headerlink" href="#useful-out-of-the-box-javascripts" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://www.sixfeetup.com/blog/2009/7/31/utilize-available-javascript-in-plone-without-knowing-javascript">Please read this blog post</a>.</p>
</div>
<div class="section" id="per-folder-overrides">
<h2><a class="toc-backref" href="#id12">Per folder overrides</a><a class="headerlink" href="#per-folder-overrides" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://pypi.python.org/pypi/Products.CustomOverrides">http://pypi.python.org/pypi/Products.CustomOverrides</a></li>
</ul>
</div>
<div class="section" id="generating-javascript-dynamically">
<h2><a class="toc-backref" href="#id13">Generating Javascript dynamically</a><a class="headerlink" href="#generating-javascript-dynamically" title="Permalink to this headline">¶</a></h2>
<p>TAL template language is not suitable for non-XML generation.
Use Python string templates.</p>
<p>Don't put dynamically generated javascripts to <tt class="docutils literal"><span class="pre">portal_javascripts</span></tt> registry unless you want to cache them
and they do not differ by the user.</p>
<p>For example, see <tt class="docutils literal"><span class="pre">FacebookConnectJavascriptViewlet</span></tt></p>
<ul class="simple">
<li><a class="reference external" href="http://svn.plone.org/svn/collective/mfabrik.like/trunk/mfabrik/like/viewlets.py">http://svn.plone.org/svn/collective/mfabrik.like/trunk/mfabrik/like/viewlets.py</a></li>
</ul>
</div>
<div class="section" id="conditional-comments-ie">
<h2><a class="toc-backref" href="#id14">Conditional comments (IE)</a><a class="headerlink" href="#conditional-comments-ie" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://plone.org/products/plone/roadmap/232a">http://plone.org/products/plone/roadmap/232a</a></li>
</ul>
</div>
<div class="section" id="loading-javascript-files-for-certain-edit-views-only-to-be-used-with-widgets">
<h2><a class="toc-backref" href="#id15">Loading Javascript files for certain edit views only (to be used with widgets)</a><a class="headerlink" href="#loading-javascript-files-for-certain-edit-views-only-to-be-used-with-widgets" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://stackoverflow.com/questions/5469844/registering-a-javascript-to-be-loaded-on-edit-view">http://stackoverflow.com/questions/5469844/registering-a-javascript-to-be-loaded-on-edit-view</a></li>
</ul>
</div>
<div class="section" id="ajax-y-view-loading">
<h2><a class="toc-backref" href="#id16">AJAX-y view loading</a><a class="headerlink" href="#ajax-y-view-loading" title="Permalink to this headline">¶</a></h2>
<div class="section" id="loading-by-page-load">
<h3><a class="toc-backref" href="#id17">Loading by page load</a><a class="headerlink" href="#loading-by-page-load" title="Permalink to this headline">¶</a></h3>
<p>Let's imagine we have this piece of synchronous page template code.
The code is a <a class="reference internal" href="../views/browserviews.html"><em>view page template</em></a> code which includes another view inside it.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;tal:finnish</span> <span class="na">condition=</span><span class="s">&quot;python:context.restrictedTraverse(&#39;@@plone_portal_state&#39;).language() == &#39;fi&#39;&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">tal:replace=</span><span class="s">&quot;structure here/productappreciation_view&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/tal:finnish&gt;</span>
</pre></div>
</div>
<p>To make it load the view asynchronous, to be loaded with AJAX call when the page loading has been completed, you can do:</p>
<div class="highlight-python"><pre>&lt;tal:finnish condition="python:context.restrictedTraverse('@@plone_portal_state').language() == 'fi'"&gt;


       &lt;div id="comment-placefolder"&gt;

               &lt;!-- Display spinning AJAX indicator gif until our AJAX call completes --&gt;

               &lt;p class="loading-indicator"&gt;
                       &lt;!-- Image is in Products.CMFPlone/skins/plone_images --&gt;
                       &lt;img tal:attributes="src string:${context/@@plone_portal_state/portal_url}/spinner.gif" /&gt; Loading comments
               &lt;/p&gt;

               &lt;!-- Hidden link to a view URL which will render the view containing the snippet for comments --&gt;
               &lt;a rel="nofollow" style="display:none" tal:attributes="href string:${context/absolute_url}/productappreciation_view" /&gt;

               &lt;script&gt;

                       // Generate URL to ta view

                       jq(document).ready(function() {

                               // Extract URL from HTML page
                               var commentURL = jq("#comment-placefolder a").attr("href");

                               if (commentURL) {
                                       // Trigger AJAX call
                                       jq("#comment-placefolder").load(commentURL);
                               }
                       });
               &lt;/script&gt;
       &lt;/div&gt;</pre>
</div>
</div>
<div class="section" id="loading-when-element-becomes-visible">
<h3><a class="toc-backref" href="#id18">Loading when element becomes visible</a><a class="headerlink" href="#loading-when-element-becomes-visible" title="Permalink to this headline">¶</a></h3>
<p>Here is another example where more page data is lazily loaded
when the user scrolls down to the page and the item becomes visible.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// Generate URL to ta view</span>

<span class="nx">jq</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

        <span class="c1">// http://remysharp.com/2009/01/26/element-in-view-event-plugin/</span>
        <span class="nx">jq</span><span class="p">(</span><span class="s2">&quot;#comment-placeholder&quot;</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;inview&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

                <span class="c1">// This function is executed when the placeholder becomes visible</span>

                <span class="c1">// Extract URL from HTML page</span>
                <span class="kd">var</span> <span class="nx">commentURL</span> <span class="o">=</span> <span class="nx">jq</span><span class="p">(</span><span class="s2">&quot;#comment-placeholder a&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;href&quot;</span><span class="p">);</span>

                <span class="k">if</span> <span class="p">(</span><span class="nx">commentURL</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">// Trigger AJAX call</span>
                        <span class="nx">jq</span><span class="p">(</span><span class="s2">&quot;#comment-placeholder&quot;</span><span class="p">).</span><span class="nx">load</span><span class="p">(</span><span class="nx">commentURL</span><span class="p">);</span>
                <span class="p">}</span>

        <span class="p">});</span>

<span class="p">});</span>
</pre></div>
</div>
<p>More info</p>
<ul class="simple">
<li><a class="reference external" href="http://blog.mfabrik.com/2011/03/09/lazily-load-elements-becoming-visible-using-jquery/">http://blog.mfabrik.com/2011/03/09/lazily-load-elements-becoming-visible-using-jquery/</a></li>
<li><a class="reference external" href="http://remysharp.com/2009/01/26/element-in-view-event-plugin/">http://remysharp.com/2009/01/26/element-in-view-event-plugin/</a></li>
</ul>
</div>
</div>
<div class="section" id="checking-if-document-is-in-wysiwyg-edit-mode">
<h2><a class="toc-backref" href="#id19">Checking if document is in WYSIWYG edit mode</a><a class="headerlink" href="#checking-if-document-is-in-wysiwyg-edit-mode" title="Permalink to this headline">¶</a></h2>
<p>WYSIWYG editor (TinyMCE) is loaded in its own &lt;iframe&gt;.
Your UI related Javascript mode might want to do some special checks
for running different code paths when the text is being edited.</p>
<p>Example:</p>
<div class="highlight-python"><pre>// Check if we are in edit or view mode
if(document.designMode.toLowerCase() == "on") {
        // Edit mode document, do not tabify
        // but let the user create the content
        return;
} else {
        kuputabs.collectTabs();
}</pre>
</div>
</div>
<div class="section" id="image-hovers">
<h2><a class="toc-backref" href="#id20">Image hovers</a><a class="headerlink" href="#image-hovers" title="Permalink to this headline">¶</a></h2>
<p>Here is a simple jQuery method to enable image roll-over effects (hover).
This method is suitable for content editors who can only images through TinyMCE
or normal upload - only naming image files specially is needed.
No CSS, Javascript or other knowledge needed by the person who needs
to add the images.</p>
<p>Just include this script on your HTML page and it will automatically
scan image filenames, detects image filenames with special roll-over marker
strings and then applies the roll-over effect on them. Roll-over
images are preloaded to avoid image blinking on slow connections.</p>
<p>The script</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="cm">/**</span>
<span class="cm"> * Automatic image hover placement with jQuery</span>
<span class="cm"> *</span>
<span class="cm"> * If image has -normal tag in it&#39;s filename assume there exist corresponding</span>
<span class="cm"> * file with -hover in its name.</span>
<span class="cm"> *</span>
<span class="cm"> * E.g. http://host.com/test_normal.gif -&gt; http://host.com/test_hover.gif</span>
<span class="cm"> *</span>
<span class="cm"> * This image is preloaded and shown when mouse is placed on the image.</span>
<span class="cm"> *</span>
<span class="cm"> * Copyright Mikko Ohtamaa 2011</span>
<span class="cm"> *</span>
<span class="cm"> * http://twitter.com/moo9000</span>
<span class="cm"> */</span>

<span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">jQuery</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">$</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">;</span>

        <span class="c1">// Look for available images which have hover option</span>
        <span class="kd">function</span> <span class="nx">scanImages</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

                        <span class="nx">$this</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

                        <span class="kd">var</span> <span class="nx">src</span> <span class="o">=</span> <span class="nx">$this</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;src&quot;</span><span class="p">);</span>

                        <span class="c1">// Images might not have src attribute, if they</span>
                        <span class="k">if</span><span class="p">(</span><span class="nx">src</span><span class="p">)</span> <span class="p">{</span>

                                <span class="c1">// Detect if this image filename has hover marker bit</span>
                                <span class="k">if</span><span class="p">(</span><span class="nx">src</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;-normal&quot;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

                                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Found rollover:&quot;</span> <span class="o">+</span> <span class="nx">src</span><span class="p">);</span>

                                        <span class="c1">// Mangle new URL for over image based on orignal</span>
                                        <span class="kd">var</span> <span class="nx">hoverSrc</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot;-normal&quot;</span><span class="p">,</span> <span class="s2">&quot;-hover&quot;</span><span class="p">);</span>

                                        <span class="c1">// Preload hover image</span>
                                        <span class="kd">var</span> <span class="nx">preload</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Image</span><span class="p">(</span><span class="nx">hoverSrc</span><span class="p">);</span>

                                        <span class="c1">// Set event handlers</span>

                                        <span class="nx">$this</span><span class="p">.</span><span class="nx">mouseover</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                                                <span class="k">this</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">hoverSrc</span><span class="p">;</span>
                                        <span class="p">});</span>

                                        <span class="nx">$this</span><span class="p">.</span><span class="nx">mouseout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                                                <span class="k">this</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">src</span><span class="p">;</span>
                                        <span class="p">});</span>

                                <span class="p">}</span>
                        <span class="p">}</span>
                <span class="p">});</span>
        <span class="p">}</span>

        <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="nx">scanImages</span><span class="p">);</span>

<span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>

  </div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<p class="logo"><a href="../index.html"><img src="../_static/plone-icon-64.png" />
</a></p>

  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Javascripting</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#javascript-libraries">Javascript libraries</a></li>
<li><a class="reference internal" href="#creating-javascripts-for-plone">Creating Javascripts for Plone</a></li>
<li><a class="reference internal" href="#executing-javascript-code-on-page-load">Executing Javascript code on page load</a></li>
<li><a class="reference internal" href="#registering-javascripts-to-portal-javascripts">Registering javascripts to portal_javascripts</a><ul>
<li><a class="reference internal" href="#bundles">Bundles</a></li>
<li><a class="reference internal" href="#include-javascript-on-every-page">Include Javascript on every page</a></li>
<li><a class="reference internal" href="#including-javascript-for-authenticated-users-only">Including Javascript for authenticated users only</a></li>
<li><a class="reference internal" href="#including-javascripts-for-widgets-and-other-special-conditions">Including Javascripts for widgets and other special conditions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#passing-dynamic-settings-to-javascripts">Passing dynamic settings to Javascripts</a></li>
<li><a class="reference internal" href="#useful-out-of-the-box-javascripts">Useful out of the box Javascripts</a></li>
<li><a class="reference internal" href="#per-folder-overrides">Per folder overrides</a></li>
<li><a class="reference internal" href="#generating-javascript-dynamically">Generating Javascript dynamically</a></li>
<li><a class="reference internal" href="#conditional-comments-ie">Conditional comments (IE)</a></li>
<li><a class="reference internal" href="#loading-javascript-files-for-certain-edit-views-only-to-be-used-with-widgets">Loading Javascript files for certain edit views only (to be used with widgets)</a></li>
<li><a class="reference internal" href="#ajax-y-view-loading">AJAX-y view loading</a><ul>
<li><a class="reference internal" href="#loading-by-page-load">Loading by page load</a></li>
<li><a class="reference internal" href="#loading-when-element-becomes-visible">Loading when element becomes visible</a></li>
</ul>
</li>
<li><a class="reference internal" href="#checking-if-document-is-in-wysiwyg-edit-mode">Checking if document is in WYSIWYG edit mode</a></li>
<li><a class="reference internal" href="#image-hovers">Image hovers</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="css.html"
                        title="previous chapter">CSS</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="resourcefolders.html"
                        title="next chapter">Resource folders</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/templates_css_and_javascripts/javascript.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="resourcefolders.html" title="Resource folders"
             >next</a> |</li>
        <li class="right" >
          <a href="css.html" title="CSS"
             >previous</a> |</li>
        <li><a href="../index.html">Plone Community Managed Developer Manual v1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >Templates, CSS and Javascript</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2010 mFabrik Research Oy and Plone community contributors.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.4.
    </div>


  </body>
</html>