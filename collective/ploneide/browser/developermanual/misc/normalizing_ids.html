<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Normalizing ids &mdash; Plone Community Managed Developer Manual v1.0 documentation</title>
    <link rel="stylesheet" href="../_static/plone.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Plone Community Managed Developer Manual v1.0 documentation" href="../index.html" />
    <link rel="up" title="Miscellaneous information" href="index.html" />
    <link rel="next" title="Monkey-patching" href="monkeypatch.html" />
    <link rel="prev" title="Annotations" href="annotations.html" />
<script language="javascript">
//<![CDATA[

Documentation.addTranslations({"locale": "fr", "plural_expr": "(n > 1)", "messages": {"See the definition": "Voir la d\u00e9finition"}});

// See http://disqus.disqus.com/general_integration_help/
var disqus_developer = 1;
if (document.location.protocol == 'http:') {
    disqus_developer = 0;
}

// Some HTML/CSS transforms we can't do in pure CSS (waiting for CSS3 support)
$(document).ready(function () {

    // Style of .. verisonmodified:: , .. versionadded:: ...
    $('p:has(span.versionmodified)').addClass('p-versionmodified');

    // Style of the TOC tree
    $('ul:has(li.toctree-l1)').addClass('toctree');

    // Decorate links to other sites
    $('a[class~=external]').attr('target', '_blank');

    // Glossary terms
    $('em.xref').attr('title', _('See the definition'));

    // We need to have all <pre> in a <div class="highlight"> to mimic pygments
    // to work around a pygments (?) bug
    var suffixes = {cfg: null, python:null};
    for (var suffix in suffixes) {
        var pattern = 'div.highlight-' + suffix + ' > pre';
        $(pattern).wrap('<div class="highlight" />');
    }
    return true;
});
//]]>
</script>

  </head>
  <body>
<!--[if lte IE 6]>
<style type="text/css">
#ie6msg{border:3px solid #090; margin:8px 0; background:#cfc; color:#000;}
#ie6msg h4{margin:8px; padding:0;}
#ie6msg p{margin:8px; padding:0;}
#ie6msg p a.getie8{font-weight:bold; color:#006;}
#ie6msg p a.ie6expl{font-weight:normal; color:#006;}
</style>
<div id="ie6msg">
<h4>Did you know that your browser is out of date?</h4>
<p>If the layout of this site seems ugly, that's because you're actually using
an outdated browser. And we wont put any effort to provide a nice layout to IE6
users.</p>
<p>To get the best possible experience using our website we recommend that you
upgrade your browser to a newer version. The current version
is <a class="getie8"
href="http://upgradeie.s3.amazonaws.com/eng/index.html">Internet Explorer
8</a>. The upgrade is free. If you're using a PC at work you should contact your
IT administrator.</p>
<p>If you want to you may also try some other popular Internet browsers
like <a class="ie6expl"
href="http://getfirefox.com">Firefox</a>, <a class="ie6expl"
href="http://www.google.com/chrome">Chrome</a>, <a class="ie6expl"
href="http://www.opera.com">Opera</a>, or <a class="ie6expl"
href="http://www.apple.com/safari/download/">Safari</a></p>
</div>
<![endif]-->

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="monkeypatch.html" title="Monkey-patching"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="annotations.html" title="Annotations"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Plone Community Managed Developer Manual v1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Miscellaneous information</a> &raquo;</li> 
      </ul>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="sphinx-content">
    <div class="section" id="normalizing-ids">
<h1>Normalizing ids<a class="headerlink" href="#normalizing-ids" title="Permalink to this headline">¶</a></h1>
<div class="admonition-description admonition ">
<p class="first admonition-title">Description</p>
<p class="last">How to convert arbitary text input to URL/CSS/file/programming safe ids.</p>
</div>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id1">Introduction</a><ul>
<li><a class="reference internal" href="#examples" id="id2">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-ids-programmatically" id="id3">Creating ids programmatically</a></li>
<li><a class="reference internal" href="#other" id="id4">Other</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Normalizers turns arbitary string (with unicode letters) to machine friendly ASCII ids.
Plone provides different id normalizers.</p>
<p>E.g:</p>
<div class="highlight-python"><pre>åland -&gt; aland</pre>
</div>
<p>Plone has conversion utilies for</p>
<ul class="simple">
<li>For URIs and URLs (plone.i18n.normalizer.interfaces.IURLNormalizer)</li>
<li>For filenames</li>
<li>For HTML ids and CSS</li>
</ul>
<p>Normalization depends on the locale. E.g. in English &quot;&quot; will be normalized as &quot;ae&quot; but in Finnish it will
be normalized &quot;å&quot; -&gt; &quot;a&quot;.</p>
<p>See`plone.i18n.normalizers package &lt;<a class="reference external" href="http://svn.plone.org/svn/plone/plone.i18n/trunk/plone/i18n/normalizer/__init__.py">http://svn.plone.org/svn/plone/plone.i18n/trunk/plone/i18n/normalizer/__init__.py</a>&gt;`_.</p>
<div class="section" id="examples">
<h3><a class="toc-backref" href="#id2">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p>Simple example for CSS id:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">zope.component</span> <span class="kn">import</span> <span class="n">getUtility</span>
<span class="kn">from</span> <span class="nn">plone.i18n.normalizer.interfaces</span> <span class="kn">import</span> <span class="n">IIDNormalizer</span>

<span class="n">normalizer</span> <span class="o">=</span> <span class="n">getUtility</span><span class="p">(</span><span class="n">IIDNormalizer</span><span class="p">)</span>
<span class="nb">id</span> <span class="o">=</span> <span class="s">&quot;portlet-static-</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">normalizer</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
</pre></div>
</div>
<p>Hard-coded id localizer which directly uses class instance and does not allow override by utility configuration.
You can use normalizers this way also when getUtility() is not available (e.g. start up code):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">plone.i18n.normalizer</span> <span class="kn">import</span> <span class="n">idnormalizer</span>

<span class="nb">id</span> <span class="o">=</span> <span class="n">idnormalizer</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="s">u&quot;ÅÄÖrjy&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Language specific example for URL:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">zope.component</span> <span class="kn">import</span> <span class="n">getUtility</span>
<span class="kn">from</span> <span class="nn">plone.i18n.normalizer.interfaces</span> <span class="kn">import</span> <span class="n">IURLNormalizer</span>

    <span class="c"># Get URL normalizer for language english</span>
<span class="n">util</span> <span class="o">=</span> <span class="n">queryUtility</span><span class="p">(</span><span class="n">IURLNormalizer</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To see available language specific localizers, see the source code of plone.i18n.normalizers package.</p>
<p>More examples:</p>
<ul class="simple">
<li><a class="reference external" href="https://svn.plone.org/svn/plone/plone.portlet.static/trunk/plone/portlet/static/static.py">Static text portlets normalizes portlet title for CSS class</a>.</li>
</ul>
</div>
</div>
<div class="section" id="creating-ids-programmatically">
<h2><a class="toc-backref" href="#id3">Creating ids programmatically</a><a class="headerlink" href="#creating-ids-programmatically" title="Permalink to this headline">¶</a></h2>
<p>If you are creating content programmatically using invokeFactory() you need
to provide the id yourself. Below is an example how to generate id from a title.</p>
</div>
<div class="section" id="other">
<h2><a class="toc-backref" href="#id4">Other</a><a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://plone.org/documentation/how-to/how-to-force-all-your-old-content-into-the-new-normalized-id-format">Enforcing normalization for old migrated context</a>.</p>
</div>
</div>

  </div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<p class="logo"><a href="../index.html"><img src="../_static/plone-icon-64.png" />
</a></p>

  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Normalizing ids</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-ids-programmatically">Creating ids programmatically</a></li>
<li><a class="reference internal" href="#other">Other</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="annotations.html"
                        title="previous chapter">Annotations</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="monkeypatch.html"
                        title="next chapter">Monkey-patching</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/misc/normalizing_ids.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="monkeypatch.html" title="Monkey-patching"
             >next</a> |</li>
        <li class="right" >
          <a href="annotations.html" title="Annotations"
             >previous</a> |</li>
        <li><a href="../index.html">Plone Community Managed Developer Manual v1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >Miscellaneous information</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2010 mFabrik Research Oy and Plone community contributors.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.4.
    </div>


  </body>
</html>